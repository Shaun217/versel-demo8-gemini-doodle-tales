<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎨 涂鸦魔法师</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <header>
        <h1>✨ 涂鸦魔法师</h1>
        <p>把随手涂鸦变成精致卡通画</p>
    </header>

    <div class="api-box">
        <label>🔑 Gemini API Key</label>
        <input type="password" id="apiKey" placeholder="粘贴你的 Google AI Studio Key">
    </div>

    <div class="main-content">
        <div class="upload-section">
            <div class="box-title">1. 上传涂鸦</div>
            <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                <img id="previewImg" src="" class="hidden">
                <div id="uploadPlaceholder">
                    <span style="font-size: 2rem;">📷</span>
                    <p>点击拍照 / 上传图片</p>
                </div>
            </div>
            <input type="file" id="fileInput" accept="image/*" onchange="handleFile(event)">
        </div>

        <div class="input-section">
            <div class="box-title">2. 发生什么了？</div>
            <textarea id="promptInput" placeholder="例如：这只小恐龙正在森林里吃冰淇淋..."></textarea>
            <button id="magicBtn" onclick="generateArt()">🎨 施展魔法生成</button>
        </div>
    </div>

    <div id="resultSection" class="result-box hidden">
        <div class="box-title">✨ 魔法生成结果</div>
        <div class="image-wrapper">
            <div id="loading" class="hidden">
                <div class="spinner"></div>
                <p id="loadingText">正在观察图片...</p>
            </div>
            <img id="finalImage" src="" alt="AI 生成结果">
        </div>
        <div class="prompt-display">
            <small>AI 绘画咒语：</small>
            <p id="generatedPrompt">...</p>
        </div>
        <button class="download-btn" onclick="downloadImage()">⬇️ 保存图片</button>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>